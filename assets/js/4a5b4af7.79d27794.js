"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[715],{1588:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var t=i(4848),s=i(8453);const r={},o="IObservationFilter",l={id:"Modules/IObservationFilter",title:"IObservationFilter",description:"This module filters out the observations using some simple logic. It helps for more robust tracking and removes outliers in the system at early stage of the system.",source:"@site/docs/02-Modules/06-IObservationFilter.md",sourceDirName:"02-Modules",slug:"/Modules/IObservationFilter",permalink:"/wiki/Modules/IObservationFilter",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"IMotionModel",permalink:"/wiki/Modules/IMotionModel"},next:{title:"IObservationCov",permalink:"/wiki/Modules/IObservationCov"}},a={},c=[{value:"Interface",id:"interface",level:2},{value:"Methods to Implement",id:"methods-to-implement",level:3},{value:"Implementations",id:"implementations",level:2}];function d(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"iobservationfilter",children:"IObservationFilter"})}),"\n",(0,t.jsx)(n.p,{children:"This module filters out the observations using some simple logic. It helps for more robust tracking and removes outliers in the system at early stage of the system."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["This module is ",(0,t.jsx)(n.em,{children:"not"})," the keypoint filtering strategy introduced in the paper. For the keypoint filtering/selection process, see ",(0,t.jsx)(n.code,{children:"IKeypointSelector"}),"."]})}),"\n",(0,t.jsx)(n.h2,{id:"interface",children:"Interface"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",metastring:'title="Module/OutlierFilter.py"',children:"class IObservationFilter(ABC, ConfigTestableSubclass):\r\n    def __init__(self, config: SimpleNamespace):\r\n        self.config = config\r\n    \r\n    def set_meta(self, meta: MetaInfo):\r\n        pass\r\n\r\n    @abstractmethod\r\n    def filter(self, observations: BatchObservation) -> torch.Tensor:\r\n        ...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"methods-to-implement",children:"Methods to Implement"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"IObservationFilter.set_meta(self, meta: MetaInfo) -> None"})}),"\n",(0,t.jsx)(n.p,{children:"This method is used to receive meta info (e.g. camera intrinsic, image shape, etc.) on the first frame received by MAC-VO."}),"\n",(0,t.jsx)(n.p,{children:"The filter can then initialize some behavior dynamically based on this information."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"IObservationFilter.filter(self, observations: BatchObservation) -> torch.Tensor"})}),"\n",(0,t.jsxs)(n.p,{children:["Given a batch of N observation (",(0,t.jsx)(n.code,{children:"BatchObservation"}),"), the filter returns a boolean tensor of shape (N,) that"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'sets True for "good" observation'}),"\n",(0,t.jsx)(n.li,{children:"sets False for observations to filter away."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"implementations",children:"Implementations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"class FilterCompose(IObservationFilter):"})}),"\n",(0,t.jsxs)(n.p,{children:["Compose multiple filters sequentially. Return the ",(0,t.jsx)(n.code,{children:"logical_and"})," of all sub-filters as final result."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"class IdentityFilter(IObservationFilter):"})}),"\n",(0,t.jsx)(n.p,{children:"Accept all observations unconditionally."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"class CovarianceSanityFilter(IObservationFilter):"})}),"\n",(0,t.jsxs)(n.p,{children:["Reject all observations with ",(0,t.jsx)(n.code,{children:"nan"})," or ",(0,t.jsx)(n.code,{children:"inf"})," value in 3x3 covariance matrix."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"class SimpleDepthFilter(IObservationFilter):"})}),"\n",(0,t.jsxs)(n.p,{children:["Given a ",(0,t.jsx)(n.code,{children:"min_depth"})," and ",(0,t.jsx)(n.code,{children:"max_depth"})," value, reject all observations that are out of this range. The ",(0,t.jsx)(n.code,{children:"max_depth"})," can be set to ",(0,t.jsx)(n.code,{children:'"auto"'}),", in which the maximum depth will be set to ",(0,t.jsx)(n.code,{children:"baseline * fx"})," to enforce a minimum of 1-pixel disparity."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"class DepthFilter(IObservationFilter):"})}),"\n",(0,t.jsx)(n.p,{children:"A fancy depth filter that iteratively filter out observations with excessive depth. Prioritize observations with relatively low depth when there are not enough observations in the system."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"class LikelyFrontOfCamFilter(IObservationFilter):"})}),"\n",(0,t.jsxs)(n.p,{children:["Filter out depth where ",(0,t.jsx)(n.code,{children:"\xb1 3 std_depth"})," is smaller than ",(0,t.jsx)(n.code,{children:"0"})," (which indicates that the depth estimation is not confidence enough)."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);